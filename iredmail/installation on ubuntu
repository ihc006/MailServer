##############  mail server   IRedMail ###########
# https://umitturanli.com.tr/iredmail-kurulumu-ve-yapilandirmasi-nasil-yapilir/
# https://www.mshowto.org/linux-iredmail-server-kurulumu-nasil-yapilir.html

sudo apt update && sudo apt upgrade -y

sudo apt install -y curl wget unzip net-tools dnsutils gzip dialog

sudo hostnamectl set-hostname mail.test.com

nano /etc/hostname

mail

nano /etc/hosts

127.0.0.1 localhost

127.0.1.1 mail.test.com mail

127.0.0.1 mail.test.com mail localhost localhost.localdomain  # hostname -f yaptÄ±ÄŸÄ±nÄ±zda sonuÃ§ olarak mail.alanadÄ±nÄ±z.com gÃ¶rmÃ¼yorsanÄ±z sunucuyu reboot edelim.

 hostname â€“fqdn   #  test

mkdir /iredmail
cd /iredmail

wget https://github.com/iredmail/iRedMail/archive/refs/tags/1.7.1.tar.gz
tar zxf iRedMail-x.y.z.tar.gz
cd /root/iRedMail-x.y.z/
bash iRedMail.sh                     # 5-15 dakika kadar sÃ¼rebilecektir.



Default mail storage path      :   (VarsayÄ±lan olarak /var/vmail klasÃ¶rÃ¼ gelmektedir)
Choose default web server      :   Ä°lgili alanda varsayÄ±lan web sunucusu seÃ§ilmelidir.  Nginx ve Apache
MySQL / Mariadb                :   kullanÄ±cÄ±sÄ± iÃ§in parolayÄ± tanÄ±mlayÄ±nÄ±z.
Your first virtual domain name :   alanÄ±ndan domain adÄ±nÄ±zÄ± tanÄ±mlayÄ±nÄ±z. Bundan sonra eklenecek domainler web arayÃ¼zÃ¼nden eklenebilir.
                                   Az Ã¶nce eklemiÅŸ olduÄŸumuz domain adÄ± iÃ§in â€ postmaster â€ e-posta kullanÄ±cÄ± parolasÄ±nÄ± tanÄ±mlayÄ±nÄ±z.
								 
Optional components : TÃ¼m bileÅŸenleri kurmanÄ±zÄ± Ã¶neririz.

Configuration complated : Konfigurasyon iÅŸlemleri tamamlandÄ±. Ä°lgili ekrandaki sorularÄ± â€ Y â€œe tuÅŸlayarak onaylayÄ±nÄ±z.

**************************** WARNING ***********************************
*************************************************************************
* *
* Below file contains sensitive infomation (username/password), please *
* do remember to *MOVE* it to a safe place after installation. *
* *
* * /var/www/html/webmail/iRedMail-0.9.0/config
* *
*************************************************************************
< Question > Continue? [y|N]y

< Question > Would you like to use firewall rules provided by iRedMail?
< Question > File: /etc/default/iptables, with SSHD port: 22. [Y|n]Y
< INFO > Copy firewall sample rules: /etc/default/iptables.
< Question > Restart firewall now (with SSHD port 22)? [y|N]y

Kurulum tamamlandÄ± ğŸ™‚

Webmail:

mail.alanadÄ±nÄ±z.com

Admin Panel:

mail.alanadÄ±nÄ±z.com/iredadmin


#########################################################################################################
# https://www.classbilisim.com.tr/index.php?rp=/knowledgebase/132/Ubuntu-20.0418.04-uzerine-iRedMail-kurulumu.html


sudo apt -y update && sudo apt -y upgrade

sudo systemctl reboot


sudo hostnamectl set-hostname mail.test.com
export HOSTNAME="email.classbilisim.com"
sudo hostnamectl set-hostname $HOSTNAME --static
sudo hostnamectl set-hostname $HOSTNAME --transient

$ sudo nano /etc/hosts
188.40.225.2 mail.hirebestengineers.com


   # DNS Ã§Ã¶zÃ¼mlemesini saÄŸlamak iÃ§in Ã¶nce dns-utils paketini kurun.

sudo apt -y install curl wget unzip net-tools dnsutils gzip dialog

https://github.com/iredmail/iRedMail/archive/refs/tags/1.7.1.tar.gz

tar xvf 1.7.1.tar.gz

cd iRedMail-*/

sudo chmod +x iRedMail.sh

sudo ./iRedMail.sh




sudo apt install software-properties-common
sudo add-apt-repository ppa:certbot/certbot -y
sudo apt install certbot -y


sudo certbot certonly --webroot --agree-tos --email you@example.com -d mail.your-domain.com -w /var/www/html/

sudo nano /etc/nginx/sites-enabled/00-default.conf

                # kare iÅŸaretini silelim..

listen [::]:80;

                # Kaydedelim ve sonrasÄ±nda diÄŸer dosyaya geÃ§elim 

sudo nano /etc/nginx/sites-enabled/00-default-ssl.conf

                # EÄŸer dosyanÄ±n iÃ§inde aÅŸaÄŸÄ±daki gibi http2 yoksa ekleyelim.
listen 443 ssl http2;
listen [::]:443 ssl http2;



sudo nginx -t
sudo systemctl reload nginx 
                # TLS sertifikasÄ± almak iÃ§in aÅŸaÄŸÄ±daki komutu tekrar Ã§alÄ±ÅŸtÄ±rÄ±n.
sudo certbot certonly --webroot --agree-tos --email you@example.com -d mail.your-domain.com -w /var/www/html/


sudo nano /etc/nginx/templates/ssl.tmpl
                # AÅŸaÄŸÄ±daki 2 satÄ±rÄ± bulun.
ssl_certificate /etc/ssl/certs/iRedMail.crt;
ssl_certificate_key /etc/ssl/private/iRedMail.key;
                 
				 # BunlarÄ± ÅŸununla deÄŸiÅŸtirin:
ssl_certificate /etc/letsencrypt/live/mail.your-domain.com/fullchain.pem;
ssl_certificate_key /etc/letsencrypt/live/mail.your-domain.com/privkey.pem;


                  # DosyayÄ± kaydedin ve kapatÄ±n. ArdÄ±ndan nginx yapÄ±landÄ±rmasÄ±nÄ± test edin ve yeniden yÃ¼kleyin.

sudo nginx -t

sudo systemctl reload nginx

                    # Sunucuyu yeniden baÅŸlatalÄ±m. BaÅŸarÄ±lÄ± bir ÅŸekilde kurulum tamamlamÄ±ÅŸ ssl yapÄ±landÄ±rÄ±lmÄ±ÅŸ olduk.
					
					
					
